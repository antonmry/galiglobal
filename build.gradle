buildscript {
  repositories {
      mavenLocal()
      mavenCentral()   
      jcenter()
  }

  dependencies { 
      classpath 'me.champeau.gradle:jbake-gradle-plugin:0.2'
      classpath 'org.codehaus.groovy:groovy-all:2.3.0'
      classpath 'org.pegdown:pegdown:1.4.2'
      classpath 'org.ajoberstar:grgit:1.1.0'
  }
}

apply plugin: 'me.champeau.jbake'

jbake {
   input = file('src/jbake')
   output = file('../antonmry.github.io_master')
   clearCache = true
   configuration['render.tag'] = 'true'
}

ext.repo = org.ajoberstar.grgit.Grgit.open(project.file('../antonmry.github.io_master'))

task publish << {
    repo.add(patterns: ['.'])
    repo.commit(message: 'Committing my code.', amend: true)
    repo.push(force: true);
}
